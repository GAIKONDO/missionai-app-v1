# ãƒãƒ¼ãƒˆè¨­è¨ˆã¨ã‚µãƒ¼ãƒãƒ¼æ§‹æˆã®è¨­è¨ˆæ›¸

> **ğŸ“‹ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆãƒ¡ã‚¤ãƒ³è¨­è¨ˆæ›¸ï¼‰  
> **ğŸ“… æœ€çµ‚æ›´æ–°**: 2025-12-11  
> **ğŸ‘¤ ç”¨é€”**: ãƒãƒ¼ãƒˆè¨­è¨ˆã¨ã‚µãƒ¼ãƒãƒ¼æ§‹æˆã®å®Ÿè£…ä»•æ§˜æ›¸

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€é–‹ç™ºç’°å¢ƒã¨é…å¸ƒç’°å¢ƒï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰ã®ä¸¡æ–¹ã‚’è€ƒæ…®ã—ãŸã€ãƒãƒ¼ãƒˆè¨­è¨ˆã¨ã‚µãƒ¼ãƒãƒ¼æ§‹æˆã‚’å®šç¾©ã—ã¾ã™ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å…¨ä½“åƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tauriã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   HTML/UIå±¤      â”‚      â”‚   APIå±¤          â”‚            â”‚
â”‚  â”‚                  â”‚      â”‚                  â”‚            â”‚
â”‚  â”‚ é–‹ç™º: Next.js    â”‚â—„â”€â”€â”€â”€â”€â”¤  Rust API Server â”‚            â”‚
â”‚  â”‚ æœ¬ç•ª: é™çš„HTML   â”‚      â”‚  (Axum)          â”‚            â”‚
â”‚  â”‚                  â”‚      â”‚                  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                      â”‚                       â”‚
â”‚                                      â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   ãƒ‡ãƒ¼ã‚¿å±¤       â”‚      â”‚   ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢    â”‚            â”‚
â”‚  â”‚                  â”‚      â”‚                  â”‚            â”‚
â”‚  â”‚  SQLite          â”‚      â”‚  ChromaDB Server â”‚            â”‚
â”‚  â”‚  (ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«)â”‚      â”‚  (Pythonãƒ—ãƒ­ã‚»ã‚¹) â”‚            â”‚
â”‚  â”‚                  â”‚      â”‚                  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒãƒ¼ãƒˆè¨­è¨ˆ

### é–‹ç™ºç’°å¢ƒï¼ˆDevelopmentï¼‰

| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒãƒ¼ãƒˆ | ãƒ—ãƒ­ãƒˆã‚³ãƒ« | èª¬æ˜ |
|---------|--------|-----------|------|
| Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ | **3010** | HTTP | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆHMRå¯¾å¿œï¼‰ |
| Rust APIã‚µãƒ¼ãƒãƒ¼ | **3010** | HTTP | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚µãƒ¼ãƒãƒ¼ï¼ˆé–‹ç™ºç’°å¢ƒã§ã¯Next.jsã¨åŒã˜ãƒãƒ¼ãƒˆï¼‰ |
| ChromaDB Server | **8000** | HTTP | ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã‚µãƒ¼ãƒãƒ¼ï¼ˆPythonãƒ—ãƒ­ã‚»ã‚¹ï¼‰ |

**ç‰¹å¾´:**
- Next.jsã¨Rust APIã‚µãƒ¼ãƒãƒ¼ã¯**ç•°ãªã‚‹ãƒãƒ¼ãƒˆ**ã‚’ä½¿ç”¨ï¼ˆç«¶åˆå›é¿ï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯`http://localhost:3010`ã‹ã‚‰Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶š
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯`http://localhost:3010`ã‹ã‚‰Rust APIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šï¼ˆé–‹ç™ºç’°å¢ƒã§ã¯Next.jsã¨åŒã˜ãƒãƒ¼ãƒˆï¼‰
- ChromaDBã¯`http://localhost:8000`ã§èµ·å‹•

### é…å¸ƒç’°å¢ƒï¼ˆProduction / Releaseï¼‰

| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒãƒ¼ãƒˆ | ãƒ—ãƒ­ãƒˆã‚³ãƒ« | èª¬æ˜ |
|---------|--------|-----------|------|
| HTMLé…ä¿¡ | **ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«** | `tauri://localhost` | Tauriã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ |
| Rust APIã‚µãƒ¼ãƒãƒ¼ | **3011** | HTTP | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚µãƒ¼ãƒãƒ¼ |
| ChromaDB Server | **8000** | HTTP | ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã‚µãƒ¼ãƒãƒ¼ï¼ˆPythonãƒ—ãƒ­ã‚»ã‚¹ï¼‰ |

**ç‰¹å¾´:**
- Next.jsã¯ä¸è¦ï¼ˆé™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ¸ˆã¿ï¼‰
- HTMLã¯Tauriã®ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆ`tauri://localhost`ï¼‰ã§é…ä¿¡
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯`http://localhost:3011`ã‹ã‚‰Rust APIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶š
- ChromaDBã¯`http://localhost:8000`ã§èµ·å‹•

## HTMLã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè£…æ–¹å¼

### é–‹ç™ºç’°å¢ƒ

**Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ3010ï¼‰**
- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆHMRï¼‰å¯¾å¿œ
- é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆReact DevToolsãªã©ï¼‰ãŒä½¿ç”¨å¯èƒ½
- ã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—ãŒæœ‰åŠ¹
- Tauriã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¯`http://localhost:3010`ã‚’è¡¨ç¤º

**è¨­å®š:**
```json
// tauri.conf.dev.json
{
  "build": {
    "beforeDevCommand": "npm run dev",
    "devUrl": "http://localhost:3010"
  },
  "app": {
    "windows": [{
      "url": "http://localhost:3010"
    }]
  }
}
```

**å‹•ä½œ:**
- `npm run tauri:dev`å®Ÿè¡Œæ™‚ã€`beforeDevCommand`ã§`npm run dev`ãŒå®Ÿè¡Œã•ã‚Œã‚‹
- Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒãƒãƒ¼ãƒˆ3010ã§èµ·å‹•
- Tauriã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒ`http://localhost:3010`ã‚’è¡¨ç¤º

### é…å¸ƒç’°å¢ƒ

**Tauriã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆ`tauri://localhost`ï¼‰**
- é™çš„HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥é…ä¿¡
- Node.jsä¸è¦
- ã‚¢ãƒ—ãƒªãƒãƒ³ãƒ‰ãƒ«ã«å«ã¾ã‚Œã‚‹
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œå¯èƒ½

**è¨­å®š:**
```json
// tauri.conf.json
{
  "build": {
    "beforeBuildCommand": "npm run build",
    "frontendDist": "../out"
  },
  "app": {
    "windows": [{
      "url": "tauri://localhost"  // ã¾ãŸã¯ "index.html"
    }]
  },
  "bundle": {
    "resources": ["../out", "template-data.json"]
  }
}
```

**å®Ÿè£…è¦ä»¶:**

1. **Cargo.tomlã®è¨­å®š:**
   ```toml
   [features]
   custom-protocol = ["tauri/custom-protocol"]
   default = ["custom-protocol"]  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹åŒ–
   ```

2. **ãƒ“ãƒ«ãƒ‰æ™‚ã®ãƒ•ãƒ©ã‚°:**
   - `tauri build`ã‚³ãƒãƒ³ãƒ‰ã§`--features custom-protocol`ã‚’æŒ‡å®šï¼ˆã¾ãŸã¯Cargo.tomlã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæœ‰åŠ¹ï¼‰
   - ã¾ãŸã¯ã€`Cargo.toml`ã®`[features]`ã§`default = ["custom-protocol"]`ã‚’è¨­å®š

3. **å‹•ä½œç¢ºèª:**
   - æœ¬ç•ªãƒ“ãƒ«ãƒ‰æ™‚ã«`tauri://localhost`ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹
   - é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãé…ä¿¡ã•ã‚Œã‚‹ã‹
   - ç›¸å¯¾ãƒ‘ã‚¹ï¼ˆ`../out/index.html`ãªã©ï¼‰ãŒè§£æ±ºã•ã‚Œã‚‹ã‹

**URLè§£æ±ºã®å„ªå…ˆé †ä½:**
1. `tauri.conf.dev.json`ã®`url`ï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
2. `tauri.conf.json`ã®`url`ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
3. `frontendDist`ã§æŒ‡å®šã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®`index.html`

### âš ï¸ Tauriã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã®æ³¨æ„äº‹é …

**ç›¸å¯¾ãƒ‘ã‚¹ã¨ã‚¢ã‚»ãƒƒãƒˆå‚ç…§ã®å•é¡Œ:**

`tauri://localhost`é…ä¿¡ã§ã¯ã€Next.jsã®é™çš„å‡ºåŠ›æ™‚ã®ãƒ‘ã‚¹è§£æ±ºã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

**å•é¡Œç‚¹:**
- ç›¸å¯¾ãƒ‘ã‚¹å‚ç…§ï¼ˆç”»åƒã€CSSã€JSï¼‰ãŒNext.jsã®æ§‹æˆã«ä¾å­˜
- `basePath`ãŒå¿…è¦ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹
- Next.jsã®`assetPrefix`ã¨ã®é–¢ä¿‚ãŒä¸æ˜ç­ã«ãªã‚ŠãŒã¡
- ã€Œæœ¬ç•ªã ã‘ç”»åƒãŒå‡ºãªã„ã€å•é¡ŒãŒç™ºç”Ÿã—ã‚„ã™ã„

**æ¨å¥¨è¨­å®š:**

**next.config.js:**
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'export',
  distDir: 'out',
  images: {
    unoptimized: true,  // å¿…é ˆ: ç”»åƒæœ€é©åŒ–ã‚’ç„¡åŠ¹åŒ–
  },
  assetPrefix: '',  // å¿…é ˆ: ç©ºæ–‡å­—åˆ—ã«å›ºå®šï¼ˆç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ï¼‰
  trailingSlash: true,
  // basePath ã¯è¨­å®šã—ãªã„ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ï¼‰
}
```

**ç”»åƒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½¿ç”¨:**
```typescript
// Next.js Imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ unoptimized:true ã‚’æ¨å¥¨
import Image from 'next/image';

<Image
  src="/images/logo.png"  // public/ ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹
  alt="Logo"
  width={200}
  height={200}
  unoptimized={true}  // å¿…é ˆ
/>
```

**public/ å†…ã®ãƒ‘ã‚¹:**
- `public/`å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯çµ¶å¯¾ãƒ‘ã‚¹ï¼ˆ`/images/logo.png`ï¼‰ã§å‚ç…§
- ç›¸å¯¾ãƒ‘ã‚¹ï¼ˆ`./images/logo.png`ï¼‰ã¯ä½¿ç”¨ã—ãªã„

**CSS/JSã®å‚ç…§:**
- Next.jsã®ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ã¯è‡ªå‹•çš„ã«æ­£ã—ã„ãƒ‘ã‚¹ã§è§£æ±ºã•ã‚Œã‚‹
- `_next/static/`é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªå‹•çš„ã«æ­£ã—ã„ãƒ‘ã‚¹ã§å‚ç…§ã•ã‚Œã‚‹

**ç¢ºèªäº‹é …:**
- [ ] `assetPrefix`ãŒç©ºæ–‡å­—åˆ—ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] `images.unoptimized`ãŒ`true`ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] `public/`å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒçµ¶å¯¾ãƒ‘ã‚¹ã§å‚ç…§ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã§ç”»åƒãƒ»CSSãƒ»JSãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã‚‹ã‹

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®APIæ¥ç¶šè¨­å®š

### ç’°å¢ƒå¤‰æ•°ã®ä¼æ’­

**å‘½åè¦å‰‡:**
- Rustå´: `API_SERVER_PORT`ï¼ˆã‚µãƒ¼ãƒãƒ¼å´ã®è¨­å®šï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´: `NEXT_PUBLIC_API_SERVER_PORT`ï¼ˆNext.jsã®ãƒ“ãƒ«ãƒ‰æ™‚åŸ‹ã‚è¾¼ã¿ï¼‰

**ç†ç”±:**
- Next.jsã§ã¯`NEXT_PUBLIC_`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãŒãªã„ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ä½¿ç”¨ã§ããªã„
- Rustå´ã§ã¯é€šå¸¸ã®ç’°å¢ƒå¤‰æ•°åã‚’ä½¿ç”¨
- ä¸¡æ–¹ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã§ä¸€è²«ã—ãŸå‹•ä½œã‚’ä¿è¨¼

**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«:**
```bash
# .env ã¾ãŸã¯ local.envï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
API_SERVER_PORT=3011
NEXT_PUBLIC_API_SERVER_PORT=3011
CHROMADB_PORT=8000
```

**æœ¬ç•ªç’°å¢ƒ:**
- ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä½¿ç”¨ã—ãªã„ï¼ˆãƒ“ãƒ«ãƒ‰æ™‚ã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ï¼‰
- ã¾ãŸã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã‚€

### ã‚³ãƒ¼ãƒ‰å®Ÿè£…

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ï¼ˆlib/apiClient.tsï¼‰:**
```typescript
/**
 * Rust APIã‚µãƒ¼ãƒãƒ¼ç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
 * ãƒãƒ¼ãƒˆç•ªå·ã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã¿ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯3011
 */

// é–‹ç™ºç’°å¢ƒã§ã¯3010ã€æœ¬ç•ªç’°å¢ƒã§ã¯3011ã‚’ä½¿ç”¨
const API_SERVER_PORT = process.env.NEXT_PUBLIC_API_SERVER_PORT 
  ? parseInt(process.env.NEXT_PUBLIC_API_SERVER_PORT, 10)
  : (process.env.NODE_ENV === 'development' ? 3010 : 3011);

const API_BASE_URL = `http://127.0.0.1:${API_SERVER_PORT}`;

// APIãƒªã‚¯ã‚¨ã‚¹ãƒˆé–¢æ•°
async function apiRequest<T>(endpoint: string, options?: RequestInit): Promise<T> {
  const url = `${API_BASE_URL}${endpoint}`;
  // ... å®Ÿè£…
}
```

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å´ï¼ˆsrc-tauri/src/main.rsï¼‰:**
```rust
// Rust APIã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆç•ªå·ã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã¿ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯é–‹ç™ºç’°å¢ƒ3010ã€æœ¬ç•ªç’°å¢ƒ3011ï¼‰
let api_port = std::env::var("API_SERVER_PORT")
    .ok()
    .and_then(|s| s.parse::<u16>().ok())
    .unwrap_or(if cfg!(debug_assertions) { 3010 } else { 3011 });

let api_addr = SocketAddr::from(([127, 0, 0, 1], api_port));
```

**æ³¨æ„äº‹é …:**
- é–‹ç™ºç’°å¢ƒã§ã¯3010ã€æœ¬ç•ªç’°å¢ƒã§ã¯3011ã‚’ä½¿ç”¨
- ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œã‚’æ˜ç¢ºåŒ–
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ãƒãƒ¼ãƒˆç•ªå·ã‚’ä¸€è‡´ã•ã›ã‚‹

## èµ·å‹•é †åºã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶å¾¡

### èµ·å‹•é †åº

```
1. Tauriã‚¢ãƒ—ãƒªèµ·å‹•
   â†“
2. Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ã€éåŒæœŸï¼‰
   â†“
3. Rust APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆéåŒæœŸã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¾…æ©Ÿï¼‰
   â†“
4. ChromaDB Serverèµ·å‹•ï¼ˆéåŒæœŸã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¾…æ©Ÿï¼‰
   â†“
5. Tauriã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º
```

### ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶å¾¡

**Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼:**
- `beforeDevCommand`ã§è‡ªå‹•èµ·å‹•
- Tauriã¯èµ·å‹•å®Œäº†ã¾ã§å¾…æ©Ÿï¼ˆ`devUrl`ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚‹ã¾ã§ï¼‰

**Rust APIã‚µãƒ¼ãƒãƒ¼:**
- éåŒæœŸèµ·å‹•ï¼ˆ`tauri::async_runtime::spawn`ï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã§å¾…æ©Ÿ
- **ãƒãƒ¼ãƒˆç•ªå·ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¸é€šçŸ¥**ï¼ˆTauriã‚¤ãƒ™ãƒ³ãƒˆï¼‰

**ChromaDB Server:**
- éåŒæœŸèµ·å‹•
- **APIã‚µãƒ¼ãƒãƒ¼ã¯ChromaDBã®èµ·å‹•æˆåŠŸã‚’å¾…ã£ã¦ã‹ã‚‰ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç™»éŒ²**
- èµ·å‹•å¤±æ•—æ™‚ã¯degradeãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ï¼ˆæ¤œç´¢æ©Ÿèƒ½ã¯æœ€ä½é™ï¼‰

### ğŸ”¹ èµ·å‹•é †åºä¿è¨¼ã®å®Ÿè£…

**å•é¡Œ:**
- ãƒ•ãƒ­ãƒ³ãƒˆå´ã®ãƒªãƒˆãƒ©ã‚¤ã«è²¬å‹™ãŒå¯„ã£ã¦ã„ã‚‹
- ChromaDBãŒèµ·å‹•ã—ã¦ã„ãªã„çŠ¶æ…‹ã§APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒç™»éŒ²ã•ã‚Œã‚‹å¯èƒ½æ€§

**æ¨å¥¨å®Ÿè£…:**

**Rust APIã‚µãƒ¼ãƒãƒ¼å´:**
```rust
// ChromaDBã®èµ·å‹•ã‚’å¾…ã£ã¦ã‹ã‚‰APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç™»éŒ²
async fn initialize_api_with_chromadb() {
    // 1. ChromaDB Serverã‚’èµ·å‹•
    match chromadb::init_chromadb_server(chromadb_data_dir, port).await {
        Ok(_) => {
            eprintln!("âœ… ChromaDB ServerãŒèµ·å‹•ã—ã¾ã—ãŸ");
            // 2. æˆåŠŸã—ãŸã‚‰APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç™»éŒ²
            register_chromadb_endpoints();
        },
        Err(e) => {
            eprintln!("âš ï¸  ChromaDB Serverã®èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ: {}", e);
            // 3. å¤±æ•—ã—ãŸã‚‰degradeãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
            register_degraded_endpoints();
            eprintln!("   SQLiteãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã—ã¾ã™");
        }
    }
    
    // 4. APIã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
    start_api_server(api_addr).await;
}
```

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´:**
- ChromaDBã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `/api/chromadb/status`
- çŠ¶æ…‹ã«å¿œã˜ã¦UIã‚’èª¿æ•´ï¼ˆæ¤œç´¢æ©Ÿèƒ½ã®ç„¡åŠ¹åŒ–ãªã©ï¼‰

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

**Rust APIã‚µãƒ¼ãƒãƒ¼:**
- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `/health`
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹: `{ "status": "ok" }`

**ChromaDB Server:**
- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `/api/v1/heartbeat`
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹: `{ "nanosecond heartbeat": <timestamp> }`

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯

```typescript
/**
 * APIã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã‚’å¾…ã¤
 * @param maxRetries æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30ï¼‰
 * @param interval ãƒªãƒˆãƒ©ã‚¤é–“éš”ï¼ˆãƒŸãƒªç§’ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1000ï¼‰
 */
async function waitForApiServer(
  maxRetries: number = 30,
  interval: number = 1000
): Promise<boolean> {
  const API_BASE_URL = `http://127.0.0.1:${process.env.NEXT_PUBLIC_API_SERVER_PORT || 3011}`;
  
  for (let i = 0; i < maxRetries; i++) {
    try {
      const response = await fetch(`${API_BASE_URL}/health`);
      if (response.ok) {
        console.log(`âœ… APIã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã—ãŸï¼ˆ${i + 1}å›ç›®ã®è©¦è¡Œï¼‰`);
        return true;
      }
    } catch (error) {
      // ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„
      if (i % 5 === 0) {
        console.log(`â³ APIã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã‚’å¾…æ©Ÿä¸­... (${i + 1}/${maxRetries})`);
      }
    }
    await new Promise(resolve => setTimeout(resolve, interval));
  }
  
  throw new Error(`APIã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã‚’å¾…ã¦ã¾ã›ã‚“ã§ã—ãŸï¼ˆ${maxRetries}å›è©¦è¡Œï¼‰`);
}

// ä½¿ç”¨ä¾‹
try {
  await waitForApiServer();
  // APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œ
} catch (error) {
  console.error('âŒ APIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸ:', error);
  // ã‚¨ãƒ©ãƒ¼å‡¦ç†
}
```

## ãƒãƒ¼ãƒˆç«¶åˆã®å›é¿ç­–

### ğŸ”¥ ãƒãƒ¼ãƒˆå‹•çš„å‰²ã‚Šå½“ã¦ã®æ¨å¥¨ï¼ˆæœ€é‡è¦ï¼‰

**å•é¡Œ:**
- å›ºå®šãƒãƒ¼ãƒˆï¼ˆ3011, 8000ï¼‰ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ç’°å¢ƒã§ä½¿ç”¨ã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚‹
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚½ãƒ•ãƒˆã§ãƒãƒ¼ãƒˆãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹
- ç¤¾å†…VPNã‚„ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨è¡çªã™ã‚‹
- è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åŒæ™‚èµ·å‹•ã§ããªã„

**æ¨å¥¨è§£æ±ºç­–: ãƒãƒ¼ãƒˆè‡ªå‹•é¸æŠ â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¸é€šçŸ¥æ–¹å¼**

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:**
```
èµ·å‹•ãƒ•ãƒ­ãƒ¼:
1. Rust APIã‚µãƒ¼ãƒãƒ¼ãŒç©ºã„ã¦ã„ã‚‹ãƒãƒ¼ãƒˆã‚’æ¢ç´¢ï¼ˆ3011ã‹ã‚‰é–‹å§‹ï¼‰
2. ãƒãƒ¼ãƒˆã‚’ç¢ºä¿
3. Tauriã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¸ "ã“ã®ãƒãƒ¼ãƒˆã‚’ä½¿ãˆ" ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ãã®ãƒãƒ¼ãƒˆã§APIã¸æ¥ç¶š
```

**å®Ÿè£…:**

**Rustå´ï¼ˆãƒãƒ¼ãƒˆè‡ªå‹•å‰²ã‚Šå½“ã¦ï¼‰:**
```rust
use std::net::{TcpListener, SocketAddr};

fn find_available_port(start_port: u16, max_attempts: u16) -> Option<u16> {
    for port in start_port..start_port + max_attempts {
        let addr = SocketAddr::from(([127, 0, 0, 1], port));
        if TcpListener::bind(addr).is_ok() {
            return Some(port);
        }
    }
    None
}

// APIã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆè‡ªå‹•å‰²ã‚Šå½“ã¦
let api_port = std::env::var("API_SERVER_PORT")
    .ok()
    .and_then(|s| s.parse::<u16>().ok())
    .unwrap_or_else(|| {
        find_available_port(3011, 10).unwrap_or(3011)
    });

// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¸ãƒãƒ¼ãƒˆç•ªå·ã‚’é€šçŸ¥
app.emit("api-port-assigned", api_port).unwrap();
```

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ï¼ˆå‹•çš„ãƒãƒ¼ãƒˆå—ä¿¡ï¼‰:**
```typescript
// Tauriã‚¤ãƒ™ãƒ³ãƒˆã§ãƒãƒ¼ãƒˆç•ªå·ã‚’å—ä¿¡
import { listen } from '@tauri-apps/api/event';

let apiPort = 3011; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤

listen<number>('api-port-assigned', (event) => {
  apiPort = event.payload;
  console.log(`âœ… APIã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆã‚’å—ä¿¡: ${apiPort}`);
});

const API_BASE_URL = `http://127.0.0.1:${apiPort}`;
```

**åˆ©ç‚¹:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç’°å¢ƒã«ä¾å­˜ã—ãªã„
- è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®åŒæ™‚èµ·å‹•ãŒå¯èƒ½
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚½ãƒ•ãƒˆã¨ã®ç«¶åˆã‚’å›é¿
- ç’°å¢ƒå¤‰æ•°ã§ã®æ‰‹å‹•è¨­å®šã‚‚å¯èƒ½ï¼ˆå„ªå…ˆåº¦: ç’°å¢ƒå¤‰æ•° > è‡ªå‹•å‰²ã‚Šå½“ã¦ï¼‰

### ChromaDB Serverã®ãƒãƒ¼ãƒˆè¨­å®š

**å•é¡Œ:**
- ãƒãƒ¼ãƒˆ8000ãŒå›ºå®šå€¤ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹
- Pythonãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãŒæ¤œçŸ¥ã—ã¥ã‚‰ã„
- Windowsã§ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã«ãƒ—ãƒ­ã‚»ã‚¹ãŒçµ‚äº†ã™ã‚‹å¯èƒ½æ€§
- Pythonç’°å¢ƒä¾å­˜ï¼ˆDLL, venvï¼‰ã®ç ´æãƒªã‚¹ã‚¯

**è§£æ±ºç­–:**

1. **ãƒãƒ¼ãƒˆè‡ªå‹•æ¤œå‡ºï¼ˆæ¨å¥¨ï¼‰**
   ```rust
   let chromadb_port = std::env::var("CHROMADB_PORT")
       .ok()
       .and_then(|s| s.parse::<u16>().ok())
       .unwrap_or_else(|| {
           find_available_port(8000, 10).unwrap_or(8000)
       });
   ```

2. **ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨­å®šï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰**
   ```rust
   let chromadb_port = std::env::var("CHROMADB_PORT")
       .ok()
       .and_then(|s| s.parse::<u16>().ok())
       .unwrap_or(8000);
   ```

3. **ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã¨è‡ªå‹•å†èµ·å‹•**
   ```rust
   // ChromaDBãƒ—ãƒ­ã‚»ã‚¹ã®ç›£è¦–
   tokio::spawn(async move {
       loop {
           tokio::time::sleep(Duration::from_secs(30)).await;
           if !is_chromadb_running(port).await {
               eprintln!("âš ï¸  ChromaDB ServerãŒåœæ­¢ã—ã¦ã„ã¾ã™ã€‚å†èµ·å‹•ã‚’è©¦ã¿ã¾ã™...");
               // å†èµ·å‹•ãƒ­ã‚¸ãƒƒã‚¯
           }
       }
   });
   ```

### APIã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆè¨­å®š

**æ¨å¥¨å®Ÿè£…ï¼ˆãƒãƒ¼ãƒˆè‡ªå‹•å‰²ã‚Šå½“ã¦ï¼‰:**
```rust
// ç’°å¢ƒå¤‰æ•° > è‡ªå‹•æ¤œå‡º > ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®å„ªå…ˆé †ä½
let api_port = std::env::var("API_SERVER_PORT")
    .ok()
    .and_then(|s| s.parse::<u16>().ok())
    .unwrap_or_else(|| {
        find_available_port(3011, 10).unwrap_or(3011)
    });

// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¸ãƒãƒ¼ãƒˆç•ªå·ã‚’é€šçŸ¥
app.emit("api-port-assigned", api_port).unwrap();
```

**é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã®è¨­å®š:**
- é–‹ç™ºç’°å¢ƒã§ã¯APIã‚µãƒ¼ãƒãƒ¼ã¯**3010**ã‚’ä½¿ç”¨ï¼ˆNext.jsã¨åŒã˜ãƒãƒ¼ãƒˆï¼‰
- æœ¬ç•ªç’°å¢ƒã§ã¯**3011**ã‚’ä½¿ç”¨ï¼ˆçµ±ä¸€ï¼‰
- ãƒãƒ¼ãƒˆç«¶åˆæ™‚ã¯è‡ªå‹•çš„ã«æ¬¡ã®åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ãƒˆã‚’é¸æŠ

**æ³¨æ„äº‹é …:**
- `NEXT_PUBLIC_API_SERVER_PORT`ã¯ãƒ“ãƒ«ãƒ‰æ™‚å›ºå®šã§ã¯ãªãã€èµ·å‹•æ™‚ã«RustãŒãƒ•ãƒ­ãƒ³ãƒˆã¸é€šçŸ¥ã™ã‚‹æ–¹å¼ã‚’æ¨å¥¨
- ã“ã‚Œã«ã‚ˆã‚Šã€Œ3011ãŒä½¿ãˆãªã„ã€å•é¡ŒãŒå®Œå…¨ã«è§£æ±ºã•ã‚Œã‚‹

## ç’°å¢ƒå¤‰æ•°ã®è¨­è¨ˆ

### é–‹ç™ºç’°å¢ƒç”¨ï¼ˆ`.env` ã¾ãŸã¯ `local.env`ï¼‰

```bash
# APIã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆ
API_SERVER_PORT=3011
NEXT_PUBLIC_API_SERVER_PORT=3011

# ChromaDB Serverã®ãƒãƒ¼ãƒˆ
CHROMADB_PORT=8000

# Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆï¼ˆpackage.jsonã§è¨­å®šï¼‰
# NEXT_PORT=3010  # ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼ˆpackage.jsonã§è¨­å®šï¼‰
```

**èª­ã¿è¾¼ã¿é †åº:**
1. `local.env`ï¼ˆå„ªå…ˆï¼‰
2. `.env`ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
3. ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒå¤‰æ•°

**å®Ÿè£…ï¼ˆsrc-tauri/src/main.rsï¼‰:**
```rust
#[cfg(debug_assertions)]
{
    // ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ï¼ˆlocal.envã‚’å„ªå…ˆã€ãªã‘ã‚Œã°.envï¼‰
    if let Err(_e) = dotenv::from_filename("local.env") {
        if dotenv::from_filename(".env").is_err() {
            eprintln!("âš ï¸  ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆlocal.env ã¾ãŸã¯ .envï¼‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ç›´æ¥èª­ã¿è¾¼ã¿ã¾ã™ã€‚");
        }
    } else {
        eprintln!("âœ… ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆlocal.envï¼‰ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ");
    }
}
```

### æœ¬ç•ªç’°å¢ƒç”¨ï¼ˆç’°å¢ƒå¤‰æ•°ã¾ãŸã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: ç’°å¢ƒå¤‰æ•°ï¼ˆæ¨å¥¨ï¼‰**
```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã‚€
API_SERVER_PORT=3011
CHROMADB_PORT=8000
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: ãƒ“ãƒ«ãƒ‰æ™‚åŸ‹ã‚è¾¼ã¿**
- Next.jsã®ãƒ“ãƒ«ãƒ‰æ™‚ã«`NEXT_PUBLIC_API_SERVER_PORT`ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹
- Rustå´ã¯å®Ÿè¡Œæ™‚ã«ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã‚€

## ãƒãƒ¼ãƒˆç¯„å›²ã®æ¨å¥¨è¨­å®š

### æ¨å¥¨ãƒãƒ¼ãƒˆç¯„å›²

| ç”¨é€” | ãƒãƒ¼ãƒˆç¯„å›² | èª¬æ˜ |
|------|-----------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ | 3000-3099 | Next.jsã€Viteãªã© |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚µãƒ¼ãƒãƒ¼ | 3010-3019 | Rust APIã€Node.js APIãªã© |
| ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã‚µãƒ¼ãƒãƒ¼ | 8000-8099 | ChromaDBã€Qdrantãªã© |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | 5432, 3306ãªã© | PostgreSQLã€MySQLãªã©ï¼ˆæœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ä½¿ç”¨ã—ãªã„ï¼‰ |

### æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒ¼ãƒˆå‰²ã‚Šå½“ã¦

| ã‚µãƒ¼ãƒ“ã‚¹ | é–‹ç™ºç’°å¢ƒ | æœ¬ç•ªç’°å¢ƒ | å‚™è€ƒ |
|---------|---------|---------|------|
| Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ | 3010 | N/A | é–‹ç™ºç’°å¢ƒã®ã¿ |
| Rust APIã‚µãƒ¼ãƒãƒ¼ | 3011 | 3011 | ç’°å¢ƒå¤‰æ•°ã§å¤‰æ›´å¯èƒ½ |
| ChromaDB Server | 8000 | 8000 | ç’°å¢ƒå¤‰æ•°ã§å¤‰æ›´å¯èƒ½ |

## æ¥ç¶šãƒ•ãƒ­ãƒ¼

### é–‹ç™ºç’°å¢ƒ

```
1. Tauriã‚¢ãƒ—ãƒªèµ·å‹•
   â†“
2. Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ3010ï¼‰
   â†“
3. Rust APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ3011ï¼‰
   â†“
4. ChromaDB Serverèµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ8000ï¼‰
   â†“
5. Tauriã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒ http://localhost:3010 ã‚’è¡¨ç¤º
   â†“
6. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒ http://localhost:3011 ã«APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
   â†“
7. Rust APIã‚µãƒ¼ãƒãƒ¼ãŒ http://localhost:8000 ã«ChromaDBãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```

### é…å¸ƒç’°å¢ƒ

```
1. Tauriã‚¢ãƒ—ãƒªèµ·å‹•
   â†“
2. Rust APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ3011ï¼‰
   â†“
3. ChromaDB Serverèµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ8000ï¼‰
   â†“
4. Tauriã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒ tauri://localhost ã‚’è¡¨ç¤ºï¼ˆé™çš„HTMLï¼‰
   â†“
5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒ http://localhost:3011 ã«APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
   â†“
6. Rust APIã‚µãƒ¼ãƒãƒ¼ãŒ http://localhost:8000 ã«ChromaDBãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```

## ChromaDBãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»•æ§˜

### âš ï¸ ChromaDBã‚’ã€Œä¸å®‰å®šãƒ—ãƒ­ã‚»ã‚¹ã€ã¨ã—ã¦æ‰±ã†

**å•é¡Œç‚¹:**
- Pythonãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãŒRustã‹ã‚‰æ¤œçŸ¥ã—ã¥ã‚‰ã„
- Windowsã§ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã«ãƒ—ãƒ­ã‚»ã‚¹ãŒçµ‚äº†ã™ã‚‹å¯èƒ½æ€§
- Pythonç’°å¢ƒä¾å­˜ï¼ˆDLL, venvï¼‰ã®ç ´æãƒªã‚¹ã‚¯
- ã€ŒRAGãŒä½¿ãˆãªã„ã¨ã‚¢ãƒ—ãƒªãŒå®Œå…¨ã«æ­»ã¬ã€çŠ¶æ…‹ã‚’é¿ã‘ãŸã„

### ChromaDBãŒèµ·å‹•ã—ãªã„å ´åˆã®æŒ™å‹•

**1. SQLiteã®å…¨æ–‡æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**

```rust
// ChromaDBèµ·å‹•å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
match chromadb::init_chromadb_server(chromadb_data_dir, port).await {
    Ok(_) => {
        // ChromaDBä½¿ç”¨ãƒ¢ãƒ¼ãƒ‰
        use_chromadb_for_search = true;
    },
    Err(e) => {
        eprintln!("âš ï¸  ChromaDB Serverã®èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ: {}", e);
        // SQLiteå…¨æ–‡æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        use_chromadb_for_search = false;
        eprintln!("   SQLiteå…¨æ–‡æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™");
    }
}
```

**2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«é€šçŸ¥**

```typescript
// Tauriã‚¤ãƒ™ãƒ³ãƒˆã§ChromaDBã®çŠ¶æ…‹ã‚’å—ä¿¡
import { listen } from '@tauri-apps/api/event';

listen<{ available: boolean; reason?: string }>('chromadb-status', (event) => {
  const { available, reason } = event.payload;
  if (!available) {
    console.warn('âš ï¸  ChromaDBãŒåˆ©ç”¨ã§ãã¾ã›ã‚“:', reason);
    // UIã‚’èª¿æ•´ï¼ˆæ¤œç´¢æ©Ÿèƒ½ã®ç„¡åŠ¹åŒ–ãªã©ï¼‰
    disableVectorSearch();
  }
});
```

**3. æ¬¡å›èµ·å‹•æ™‚ã«è‡ªå‹•å†è©¦è¡Œ**

```rust
// èµ·å‹•æ™‚ã«å‰å›ã®çŠ¶æ…‹ã‚’ç¢ºèª
let last_chromadb_status = get_last_chromadb_status();
if !last_chromadb_status.success {
    eprintln!("   å‰å›ã®èµ·å‹•ã§ChromaDBãŒå¤±æ•—ã—ã¾ã—ãŸã€‚å†è©¦è¡Œã—ã¾ã™...");
    // å†è©¦è¡Œãƒ­ã‚¸ãƒƒã‚¯
}
```

**4. ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã¨è‡ªå‹•å†èµ·å‹•**

```rust
// ChromaDBãƒ—ãƒ­ã‚»ã‚¹ã®ç›£è¦–ã‚¿ã‚¹ã‚¯
tokio::spawn(async move {
    loop {
        tokio::time::sleep(Duration::from_secs(30)).await;
        
        if !is_chromadb_running(port).await {
            eprintln!("âš ï¸  ChromaDB ServerãŒåœæ­¢ã—ã¦ã„ã¾ã™ã€‚å†èµ·å‹•ã‚’è©¦ã¿ã¾ã™...");
            
            match chromadb::init_chromadb_server(chromadb_data_dir.clone(), port).await {
                Ok(_) => {
                    eprintln!("âœ… ChromaDB Serverã‚’å†èµ·å‹•ã—ã¾ã—ãŸ");
                    app.emit("chromadb-status", json!({ "available": true })).unwrap();
                },
                Err(e) => {
                    eprintln!("âŒ ChromaDB Serverã®å†èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ: {}", e);
                    app.emit("chromadb-status", json!({ 
                        "available": false, 
                        "reason": e 
                    })).unwrap();
                }
            }
        }
    }
});
```

**ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã®æ©Ÿèƒ½åˆ¶é™:**

| æ©Ÿèƒ½ | ChromaDBä½¿ç”¨æ™‚ | SQLiteãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ™‚ |
|------|---------------|---------------------|
| ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ | âœ… é«˜ç²¾åº¦ | âŒ åˆ©ç”¨ä¸å¯ |
| å…¨æ–‡æ¤œç´¢ | âœ… åˆ©ç”¨å¯èƒ½ | âœ… åˆ©ç”¨å¯èƒ½ï¼ˆFTS5ï¼‰ |
| ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ | âœ… åˆ©ç”¨å¯èƒ½ | âŒ åˆ©ç”¨ä¸å¯ |
| ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ¤œç´¢ | âœ… é«˜ç²¾åº¦ | âš ï¸ æ–‡å­—åˆ—ãƒãƒƒãƒãƒ³ã‚°ã®ã¿ |
| é–¢ä¿‚æ¤œç´¢ | âœ… é«˜ç²¾åº¦ | âš ï¸ æ–‡å­—åˆ—ãƒãƒƒãƒãƒ³ã‚°ã®ã¿ |

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥:**

```typescript
// UIã§ã®é€šçŸ¥ä¾‹
if (!chromadbAvailable) {
  showNotification({
    type: 'warning',
    title: 'ChromaDBãŒåˆ©ç”¨ã§ãã¾ã›ã‚“',
    message: 'ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢æ©Ÿèƒ½ã¯åˆ¶é™ã•ã‚Œã¾ã™ãŒã€ã‚¢ãƒ—ãƒªã¯æ­£å¸¸ã«å‹•ä½œã—ã¾ã™ã€‚',
    actions: [
      { label: 'å†è©¦è¡Œ', onClick: () => retryChromaDB() },
      { label: 'äº†è§£', onClick: () => {} }
    ]
  });
}
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®è©³ç´°ä»•æ§˜

### ãƒãƒ¼ãƒˆç«¶åˆã‚¨ãƒ©ãƒ¼

**Rustå´ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°:**
```rust
use std::net::TcpListener;
use std::io::{Error, ErrorKind};

match TcpListener::bind(addr) {
    Ok(listener) => {
        eprintln!("âœ… ãƒãƒ¼ãƒˆ {} ã§APIã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¾ã—ãŸ", port);
        // æˆåŠŸå‡¦ç†
    },
    Err(e) if e.kind() == ErrorKind::AddrInUse => {
        eprintln!("âŒ ãƒãƒ¼ãƒˆ {} ãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™", port);
        eprintln!("   å¯¾å‡¦æ³•:");
        eprintln!("   1. ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª: lsof -i :{}", port);
        eprintln!("   2. ç’°å¢ƒå¤‰æ•°ã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´: API_SERVER_PORT={}", port + 1);
        eprintln!("   3. ç«¶åˆã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†");
        
        // ãƒãƒ¼ãƒˆè‡ªå‹•æ¤œå‡ºã‚’è©¦è¡Œ
        if let Some(available_port) = find_available_port(port + 1, 10) {
            eprintln!("   ğŸ’¡ ä»£æ›¿ãƒãƒ¼ãƒˆ {} ã‚’ä½¿ç”¨ã—ã¾ã™", available_port);
            // ä»£æ›¿ãƒãƒ¼ãƒˆã§å†è©¦è¡Œ
        } else {
            return Err(format!("ãƒãƒ¼ãƒˆç«¶åˆ: åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"));
        }
    },
    Err(e) => {
        return Err(format!("ãƒãƒ¼ãƒˆãƒã‚¤ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼: {}", e));
    },
}
```

**ChromaDB Serverèµ·å‹•å¤±æ•—:**
```rust
match chromadb::init_chromadb_server(chromadb_data_dir, port).await {
    Ok(_) => {
        eprintln!("âœ… ChromaDB ServerãŒæ­£å¸¸ã«èµ·å‹•ã—ã¾ã—ãŸ");
    },
    Err(e) => {
        eprintln!("âš ï¸  ChromaDB Serverã®èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ: {}", e);
        eprintln!("   å¯¾å‡¦æ³•:");
        eprintln!("   1. Pythonç’°å¢ƒã‚’ç¢ºèª: python3 --version");
        eprintln!("   2. ChromaDBãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª: pip list | grep chromadb");
        eprintln!("   3. ãƒãƒ¼ãƒˆ {} ãŒä½¿ç”¨ä¸­ã§ãªã„ã‹ç¢ºèª: lsof -i :{}", port, port);
        eprintln!("   4. ç’°å¢ƒå¤‰æ•°ã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´: CHROMADB_PORT={}", port + 1);
        eprintln!("   SQLiteãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒä½¿ç”¨ã•ã‚Œã¾ã™");
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ï¼ˆSQLiteã®ã¿ã§å‹•ä½œï¼‰
    }
}
```

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°:**
```typescript
async function apiRequest<T>(endpoint: string, options?: RequestInit): Promise<T> {
  const url = `${API_BASE_URL}${endpoint}`;
  
  try {
    const response = await fetch(url, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options?.headers,
      },
    });
    
    if (!response.ok) {
      const errorData: ApiError = await response.json().catch(() => ({
        error: `HTTP ${response.status}: ${response.statusText}`,
      }));
      throw new Error(errorData.error || `API request failed: ${response.statusText}`);
    }
    
    return response.json();
  } catch (error) {
    if (error instanceof TypeError && error.message.includes('fetch')) {
      // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ï¼ˆã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„å¯èƒ½æ€§ï¼‰
      console.error('âŒ APIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸ');
      console.error('   å¯¾å‡¦æ³•:');
      console.error('   1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„');
      console.error('   2. ãƒãƒ¼ãƒˆ3011ãŒä½¿ç”¨ä¸­ã§ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„');
      throw new Error('APIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚');
    }
    throw error;
  }
}
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### æ¨©é™ãƒ¢ãƒ‡ãƒ«ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼

**MissionAIã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç‰¹æ€§:**

MissionAIã¯ã™ã¹ã¦ãƒ­ãƒ¼ã‚«ãƒ«å†…ã§å®Œçµã—ã€å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’å¿…è¦ã¨ã—ã¾ã›ã‚“ã€‚

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ:**
- ãƒ­ãƒ¼ã‚«ãƒ«HTTPã‚µãƒ¼ãƒãƒ¼ã¯ã‚¢ãƒ—ãƒªé–“é€šä¿¡å°‚ç”¨ã§ã€å¤–éƒ¨ã«ã¯å…¬é–‹ã•ã‚Œãªã„
- ã™ã¹ã¦ã®é€šä¿¡ã¯`127.0.0.1`ï¼ˆlocalhostï¼‰ã«é™å®šã•ã‚Œã‚‹
- å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¸ã®æ¥ç¶šã¯è¡Œã‚ãªã„ï¼ˆAI APIå‘¼ã³å‡ºã—ã‚’é™¤ãï¼‰
- ãƒ‡ãƒ¼ã‚¿ã¯ã™ã¹ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ä¿å­˜ã•ã‚Œã‚‹

**ä¼æ¥­ç’°å¢ƒã§ã®å¯©æŸ»å¯¾å¿œ:**

é‡‘èæ©Ÿé–¢ã€åŒ»ç™‚æ©Ÿé–¢ã€ä¼æ¥­ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã§ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«APIã‚½ã‚±ãƒƒãƒˆã‚’ç«‹ã¡ä¸Šã’ã‚‹ã‚¢ãƒ—ãƒªã¯ç›£æŸ»ã«å¼•ã£ã‹ã‹ã‚Šã‚„ã™ã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

**èª¬æ˜è³‡æ–™ã¨ã—ã¦ä½¿ç”¨å¯èƒ½ãªå†…å®¹:**

```
MissionAIã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç‰¹æ€§:

1. ãƒ­ãƒ¼ã‚«ãƒ«å®Œçµå‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
   - ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³å†…ã§å®Œçµ
   - å¤–éƒ¨ã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã¯è¡Œã‚ãªã„

2. ãƒ­ãƒ¼ã‚«ãƒ«HTTPã‚µãƒ¼ãƒãƒ¼ã®ç”¨é€”
   - Tauriã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨Next.jsãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–“ã®é€šä¿¡å°‚ç”¨
   - 127.0.0.1ï¼ˆlocalhostï¼‰ã®ã¿ã§ãƒªãƒƒã‚¹ãƒ³
   - å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯èƒ½

3. ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å ´æ‰€
   - SQLite: ~/Library/Application Support/com.missionai.app/.../app.db
   - ChromaDB: ~/Library/Application Support/com.missionai.app/.../chromadb/
   - ã™ã¹ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å†…

4. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡
   - AI APIå‘¼ã³å‡ºã—ï¼ˆOpenAIã€Anthropicã€Ollamaï¼‰ã®ã¿å¤–éƒ¨é€šä¿¡
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«è¨­å®šã—ãŸAPIã‚­ãƒ¼ã‚’ä½¿ç”¨
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã¯å¤–éƒ¨ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã—ãªã„
```

### CORSè¨­å®š

**é–‹ç™ºç’°å¢ƒ:**
```rust
// src-tauri/src/api/server.rs
let cors = CorsLayer::new()
    .allow_origin("http://localhost:3010".parse::<HeaderValue>().unwrap())
    .allow_origin("http://127.0.0.1:3010".parse::<HeaderValue>().unwrap())
    .allow_methods([Method::GET, Method::POST, Method::PUT, Method::DELETE])
    .allow_headers(Any)
    .allow_credentials(true);
```
- Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ3010ï¼‰ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿è¨±å¯
- é–‹ç™ºã®åˆ©ä¾¿æ€§ã®ãŸã‚ã€ç‰¹å®šã®ãƒãƒ¼ãƒˆã®ã¿è¨±å¯

**æœ¬ç•ªç’°å¢ƒ:**
```rust
let cors = CorsLayer::new()
    .allow_origin("tauri://localhost".parse::<HeaderValue>().unwrap())
    .allow_methods([Method::GET, Method::POST, Method::PUT, Method::DELETE])
    .allow_headers(Any)
    .allow_credentials(true);
```
- Tauriã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿è¨±å¯
- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã®ã¿è¨±å¯

### CSPï¼ˆContent Security Policyï¼‰

**é–‹ç™ºç’°å¢ƒ:**
```json
"csp": "default-src 'self' http://localhost:3010; connect-src 'self' http://localhost:3010 http://localhost:3011 http://127.0.0.1:3010 http://127.0.0.1:3011 ws://localhost:* ws://127.0.0.1:* https://api.openai.com https://api.anthropic.com https://*.ollama.ai; script-src 'self' 'unsafe-inline' 'unsafe-eval' http://localhost:3010; style-src 'self' 'unsafe-inline' http://localhost:3010; img-src 'self' data: https: file: http://localhost:3010; font-src 'self' data: http://localhost:3010;"
```

**æœ¬ç•ªç’°å¢ƒ:**
```json
"csp": "default-src 'self' tauri://localhost; connect-src 'self' tauri://localhost http://localhost:3011 http://127.0.0.1:3011 ws://localhost:* ws://127.0.0.1:* https://api.openai.com https://api.anthropic.com https://*.ollama.ai; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https: file: tauri://localhost; font-src 'self' data: tauri://localhost;"
```

**å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®èª¬æ˜:**
- `default-src`: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚½ãƒ¼ã‚¹
- `connect-src`: æ¥ç¶šå¯èƒ½ãªURLï¼ˆAPIã€WebSocketãªã©ï¼‰
- `script-src`: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ã‚½ãƒ¼ã‚¹
- `style-src`: ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®ã‚½ãƒ¼ã‚¹
- `img-src`: ç”»åƒã®ã‚½ãƒ¼ã‚¹
- `font-src`: ãƒ•ã‚©ãƒ³ãƒˆã®ã‚½ãƒ¼ã‚¹

## ãƒ­ã‚°å‡ºåŠ›ã®ä»•æ§˜

### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«

**é–‹ç™ºç’°å¢ƒ:**
- DEBUG: è©³ç´°ãªãƒ‡ãƒãƒƒã‚°æƒ…å ±
- INFO: é€šå¸¸ã®å‹•ä½œæƒ…å ±
- WARN: è­¦å‘Šï¼ˆå‹•ä½œã¯ç¶™ç¶šï¼‰
- ERROR: ã‚¨ãƒ©ãƒ¼ï¼ˆå‹•ä½œã«å½±éŸ¿ï¼‰

**æœ¬ç•ªç’°å¢ƒ:**
- INFO: é€šå¸¸ã®å‹•ä½œæƒ…å ±
- WARN: è­¦å‘Š
- ERROR: ã‚¨ãƒ©ãƒ¼

### ãƒ­ã‚°å‡ºåŠ›ã®å½¢å¼

**èµ·å‹•æ™‚:**
```
ğŸš€ Tauriã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ä¸­...
âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–å®Œäº†: /path/to/app.db
ğŸ”§ APIã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆ: 3011 (ç’°å¢ƒå¤‰æ•°: 3011)
âœ… APIã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã—ãŸ: http://127.0.0.1:3011
ğŸ”§ ChromaDB Serverã®èµ·å‹•ã‚’é–‹å§‹ã—ã¾ã™...
   ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: /path/to/chromadb
   ãƒãƒ¼ãƒˆ: 8000
âœ… ChromaDB ServerãŒæ­£å¸¸ã«èµ·å‹•ã—ã¾ã—ãŸ
```

**ã‚¨ãƒ©ãƒ¼æ™‚:**
```
âŒ ãƒãƒ¼ãƒˆ 3011 ãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™
   å¯¾å‡¦æ³•:
   1. ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª: lsof -i :3011
   2. ç’°å¢ƒå¤‰æ•°ã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´: API_SERVER_PORT=3012
   3. ç«¶åˆã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
```

### ãƒ­ã‚°å‡ºåŠ›ã®å®Ÿè£…

**é–‹ç™ºç’°å¢ƒ:**
```rust
#[cfg(debug_assertions)]
{
    eprintln!("ğŸ”§ APIã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆ: {} (ç’°å¢ƒå¤‰æ•°: {})", port, env_var);
    eprintln!("âœ… APIã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã—ãŸ: http://{}", addr);
}
```

**æœ¬ç•ªç’°å¢ƒï¼ˆæ§‹é€ åŒ–ãƒ­ã‚°æ¨å¥¨ï¼‰:**
```rust
use tracing_subscriber::fmt;

// æ§‹é€ åŒ–ãƒ­ã‚°ã®åˆæœŸåŒ–
tracing_subscriber::fmt()
    .with_target(true)
    .json()  // JSONå½¢å¼ã§å‡ºåŠ›
    .with_max_level(tracing::Level::INFO)
    .init();

// æ§‹é€ åŒ–ãƒ­ã‚°ã®ä½¿ç”¨ä¾‹
tracing::info!(
    api_port = port,
    chromadb_port = chromadb_port,
    status = "started",
    "APIã‚µãƒ¼ãƒãƒ¼ã¨ChromaDB ServerãŒèµ·å‹•ã—ã¾ã—ãŸ"
);

// ã‚¨ãƒ©ãƒ¼æ™‚ã®æ§‹é€ åŒ–ãƒ­ã‚°
tracing::error!(
    error = %e,
    port = port,
    action = "port_bind_failed",
    "ãƒãƒ¼ãƒˆã®ãƒã‚¤ãƒ³ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ"
);
```

**æ§‹é€ åŒ–ãƒ­ã‚°ã®åˆ©ç‚¹:**
- ã‚¨ãƒ©ãƒ¼åŸå› ã€æ™‚åˆ»ã€ãƒãƒ¼ãƒˆç•ªå·ã€èµ·å‹•ãƒ•ãƒ­ãƒ¼ã®ã©ã“ã§å¤±æ•—ã—ãŸã‹ãŒæ©Ÿæ¢°çš„ã«è§£æå¯èƒ½
- ã‚µãƒãƒ¼ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ã®ã‚³ã‚¹ãƒˆãŒæ¿€æ¸›
- ãƒ­ã‚°è§£æãƒ„ãƒ¼ãƒ«ï¼ˆELKã€Lokiãªã©ï¼‰ã¨ã®çµ±åˆãŒå®¹æ˜“

**ãƒ­ã‚°å‡ºåŠ›ä¾‹ï¼ˆJSONå½¢å¼ï¼‰:**
```json
{
  "timestamp": "2025-01-15T10:30:45.123Z",
  "level": "INFO",
  "fields": {
    "api_port": 3011,
    "chromadb_port": 8000,
    "status": "started"
  },
  "target": "mission_ai::api::server",
  "message": "APIã‚µãƒ¼ãƒãƒ¼ã¨ChromaDB ServerãŒèµ·å‹•ã—ã¾ã—ãŸ"
}
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å®Œå…¨ãªä»•æ§˜

### tauri.conf.jsonï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

```json
{
  "productName": "MissionAI",
  "version": "2.1.2",
  "identifier": "com.missionai.app",
  "build": {
    "beforeBuildCommand": "npm run build",
    "frontendDist": "../out"
  },
  "app": {
    "withGlobalTauri": true,
    "windows": [
      {
        "title": "MissionAI",
        "width": 1400,
        "height": 900,
        "resizable": true,
        "fullscreen": false,
        "devtools": false,
        "url": "tauri://localhost"
      }
    ],
    "security": {
      "csp": "default-src 'self' tauri://localhost; connect-src 'self' tauri://localhost http://localhost:3011 http://127.0.0.1:3011 ws://localhost:* ws://127.0.0.1:* https://api.openai.com https://api.anthropic.com https://*.ollama.ai; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https: file: tauri://localhost; font-src 'self' data: tauri://localhost;"
    }
  },
  "bundle": {
    "active": true,
    "targets": "all",
    "resources": [
      "../out",
      "template-data.json"
    ]
  }
}
```

### tauri.conf.dev.jsonï¼ˆé–‹ç™ºç’°å¢ƒï¼‰

```json
{
  "build": {
    "beforeDevCommand": "npm run dev",
    "devUrl": "http://localhost:3010"
  },
  "app": {
    "windows": [
      {
        "title": "MissionAI",
        "width": 1400,
        "height": 900,
        "resizable": true,
        "fullscreen": false,
        "devtools": true,
        "url": "http://localhost:3010"
      }
    ],
    "security": {
      "csp": "default-src 'self' http://localhost:3010; connect-src 'self' http://localhost:* http://127.0.0.1:* ws://localhost:* ws://127.0.0.1:* https://api.openai.com https://api.anthropic.com https://*.ollama.ai; script-src 'self' 'unsafe-inline' 'unsafe-eval' http://localhost:3010; style-src 'self' 'unsafe-inline' http://localhost:3010; img-src 'self' data: https: file: http://localhost:3010; font-src 'self' data: http://localhost:3010;"
    }
  },
  "bundle": {
    "resources": []
  }
}
```

### package.json

```json
{
  "name": "mission-ai",
  "version": "2.1.2",
  "scripts": {
    "dev": "next dev -p 3010",
    "build": "next build",
    "start": "next start -p 3010",
    "lint": "next lint",
    "tauri": "tauri",
    "tauri:dev": "tauri dev",
    "tauri:build": "tauri build"
  }
}
```

### .env / local.env

```bash
# APIã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆ
API_SERVER_PORT=3011
NEXT_PUBLIC_API_SERVER_PORT=3011

# ChromaDB Serverã®ãƒãƒ¼ãƒˆ
CHROMADB_PORT=8000
```

### Cargo.toml

```toml
[features]
custom-protocol = ["tauri/custom-protocol"]
default = ["custom-protocol"]  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹åŒ–
```

## å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### é–‹ç™ºç’°å¢ƒ

- [ ] Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒãƒãƒ¼ãƒˆ3010ã§èµ·å‹•
- [ ] Rust APIã‚µãƒ¼ãƒãƒ¼ãŒãƒãƒ¼ãƒˆ3011ã§èµ·å‹•ï¼ˆç’°å¢ƒå¤‰æ•°å¯¾å¿œï¼‰
- [ ] ChromaDB ServerãŒãƒãƒ¼ãƒˆ8000ã§èµ·å‹•ï¼ˆç’°å¢ƒå¤‰æ•°å¯¾å¿œï¼‰
- [ ] Tauriã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒ`http://localhost:3010`ã‚’è¡¨ç¤º
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒ`http://localhost:3011`ã«APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- [ ] ãƒãƒ¼ãƒˆç«¶åˆãŒç™ºç”Ÿã—ãªã„
- [ ] ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.env`ã¾ãŸã¯`local.env`ï¼‰ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ãŒå‹•ä½œã™ã‚‹

### é…å¸ƒç’°å¢ƒ

- [ ] é™çš„HTMLãŒ`tauri://localhost`ã§é…ä¿¡ã•ã‚Œã‚‹
- [ ] Rust APIã‚µãƒ¼ãƒãƒ¼ãŒãƒãƒ¼ãƒˆ3011ã§èµ·å‹•
- [ ] ChromaDB ServerãŒãƒãƒ¼ãƒˆ8000ã§èµ·å‹•
- [ ] Node.jsãŒä¸è¦ã§ã‚ã‚‹
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œãŒå¯èƒ½
- [ ] `custom-protocol`æ©Ÿèƒ½ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹
- [ ] é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒãƒ³ãƒ‰ãƒ«ã«å«ã¾ã‚Œã¦ã„ã‚‹

## ãƒ†ã‚¹ãƒˆæ–¹æ³•

### é–‹ç™ºç’°å¢ƒã®ãƒ†ã‚¹ãƒˆ

**1. ãƒãƒ¼ãƒˆç«¶åˆã®ãƒ†ã‚¹ãƒˆ:**
```bash
# ãƒãƒ¼ãƒˆ3011ã‚’å æœ‰
nc -l 3011 &

# ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ï¼ˆã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªï¼‰
npm run tauri:dev

# ãƒãƒ¼ãƒˆã‚’è§£æ”¾
killall nc
```

**2. APIã‚µãƒ¼ãƒãƒ¼ã®æ¥ç¶šãƒ†ã‚¹ãƒˆ:**
```bash
# ã‚¢ãƒ—ãƒªèµ·å‹•å¾Œ
curl http://localhost:3011/health
# æœŸå¾…ã•ã‚Œã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹: {"status":"ok"}
```

**3. ChromaDB Serverã®æ¥ç¶šãƒ†ã‚¹ãƒˆ:**
```bash
curl http://localhost:8000/api/v1/heartbeat
# æœŸå¾…ã•ã‚Œã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹: {"nanosecond heartbeat": <timestamp>}
```

**4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®APIæ¥ç¶šãƒ†ã‚¹ãƒˆ:**
```bash
# ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ç¢ºèª
# Networkã‚¿ãƒ–ã§ http://localhost:3011 ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª
```

### æœ¬ç•ªç’°å¢ƒã®ãƒ†ã‚¹ãƒˆ

**1. é™çš„HTMLã®é…ä¿¡ãƒ†ã‚¹ãƒˆ:**
```bash
npm run build
npm run tauri:build
# ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¦ã€tauri://localhostãŒå‹•ä½œã™ã‚‹ã‹ç¢ºèª
```

**2. ãƒãƒ¼ãƒˆè¨­å®šã®ãƒ†ã‚¹ãƒˆ:**
```bash
# ç’°å¢ƒå¤‰æ•°ã‚’å¤‰æ›´ã—ã¦ãƒ“ãƒ«ãƒ‰
API_SERVER_PORT=3012 npm run tauri:build
# ã‚¢ãƒ—ãƒªèµ·å‹•å¾Œã€ãƒãƒ¼ãƒˆ3012ã§APIã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã‹ç¢ºèª
curl http://localhost:3012/health
```

**3. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œã®ãƒ†ã‚¹ãƒˆ:**
```bash
# ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’åˆ‡æ–­
# ã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹ç¢ºèªï¼ˆAPIã‚µãƒ¼ãƒãƒ¼ã¨ChromaDBã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ä½œï¼‰
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆç«¶åˆã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:**
- `Address already in use`ã‚¨ãƒ©ãƒ¼
- ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ãªã„

**å¯¾å‡¦æ³•:**
1. ä½¿ç”¨ä¸­ã®ãƒãƒ¼ãƒˆã‚’ç¢ºèª: `lsof -i :PORT`
2. ç’°å¢ƒå¤‰æ•°ã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´
3. ç«¶åˆã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†

### ChromaDB ServerãŒèµ·å‹•ã—ãªã„

**ç—‡çŠ¶:**
- ChromaDB Serverã®åˆæœŸåŒ–ã«å¤±æ•—
- ãƒãƒ¼ãƒˆ8000ãŒä½¿ç”¨ä¸­

**å¯¾å‡¦æ³•:**
1. ãƒãƒ¼ãƒˆ8000ã®ä½¿ç”¨çŠ¶æ³ã‚’ç¢ºèª: `lsof -i :8000`
2. `CHROMADB_PORT`ç’°å¢ƒå¤‰æ•°ã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´
3. Pythonç’°å¢ƒã‚’ç¢ºèª: `python3 --version`
4. ChromaDBãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª: `pip list | grep chromadb`

### APIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ããªã„

**ç—‡çŠ¶:**
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰APIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ããªã„
- 404ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯æ¥ç¶šã‚¨ãƒ©ãƒ¼

**å¯¾å‡¦æ³•:**
1. APIã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª: `curl http://localhost:3011/health`
2. ãƒãƒ¼ãƒˆç•ªå·ãŒæ­£ã—ã„ã‹ç¢ºèªï¼ˆç’°å¢ƒå¤‰æ•°`NEXT_PUBLIC_API_SERVER_PORT`ï¼‰
3. CORSè¨­å®šã‚’ç¢ºèª
4. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•

### é™çš„HTMLãŒè¡¨ç¤ºã•ã‚Œãªã„ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

**ç—‡çŠ¶:**
- æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã§`tauri://localhost`ãŒè¡¨ç¤ºã•ã‚Œãªã„
- 404ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹

**å¯¾å‡¦æ³•:**
1. `custom-protocol`æ©Ÿèƒ½ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆ`Cargo.toml`ï¼‰
2. `tauri.conf.json`ã®`url`è¨­å®šã‚’ç¢ºèª
3. `frontendDist`ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
4. `bundle.resources`ã«`"../out"`ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

## ã¾ã¨ã‚

### æ¨å¥¨ã•ã‚Œã‚‹æœ€çµ‚è¨­è¨ˆ

| ç’°å¢ƒ | Next.js | Rust API | ChromaDB | HTMLé…ä¿¡ |
|------|---------|----------|----------|----------|
| é–‹ç™º | 3010 | 3010 | 8000 | Next.js (3010) |
| æœ¬ç•ª | N/A | 3011 | 8000 | Tauri Protocol |

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ:**
1. âœ… **ãƒãƒ¼ãƒˆå‹•çš„å‰²ã‚Šå½“ã¦ã‚’æ¨å¥¨**ï¼ˆèµ·å‹•æ™‚ã«RustãŒãƒ•ãƒ­ãƒ³ãƒˆã¸é€šçŸ¥ï¼‰
2. âœ… **ChromaDBãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»•æ§˜ã‚’æ˜æ–‡åŒ–**ï¼ˆSQLiteå…¨æ–‡æ¤œç´¢ã¸ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
3. âœ… **Tauriã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã®æ³¨æ„äº‹é …**ï¼ˆassetPrefixã€ç›¸å¯¾ãƒ‘ã‚¹ï¼‰
4. âœ… **èµ·å‹•é †åºä¿è¨¼ã®å®Ÿè£…**ï¼ˆChromaDBèµ·å‹•æˆåŠŸå¾Œã«APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç™»éŒ²ï¼‰
5. âœ… **æ§‹é€ åŒ–ãƒ­ã‚°ã®æ¡ç”¨**ï¼ˆJSONå½¢å¼ã€ãƒ‡ãƒãƒƒã‚°ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼‰
6. âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¨©é™ãƒ¢ãƒ‡ãƒ«ã®è¨˜è¿°**ï¼ˆä¼æ¥­ç’°å¢ƒã§ã®å¯©æŸ»å¯¾å¿œï¼‰
7. é–‹ç™ºç’°å¢ƒã§ã¯API: 3010ã€æœ¬ç•ªç’°å¢ƒã§ã¯API: 3011ã€ChromaDB: 8000ï¼ˆçµ±ä¸€ï¼‰
8. ç’°å¢ƒå¤‰æ•°ã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´å¯èƒ½ã«ã™ã‚‹ï¼ˆå„ªå…ˆåº¦: ç’°å¢ƒå¤‰æ•° > è‡ªå‹•å‰²ã‚Šå½“ã¦ï¼‰
9. æœ¬ç•ªç’°å¢ƒã§ã¯Node.jsä¸è¦ï¼ˆé™çš„HTML + Rust APIï¼‰
10. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ­ã‚°å‡ºåŠ›ã‚’é©åˆ‡ã«å®Ÿè£…ã™ã‚‹

## æ”¹å–„ã®å„ªå…ˆé †ä½

### ğŸ”¥ æœ€é‡è¦ï¼ˆå³åº§ã«å®Ÿè£…æ¨å¥¨ï¼‰

1. **ãƒãƒ¼ãƒˆå‹•çš„å‰²ã‚Šå½“ã¦ â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€šçŸ¥æ–¹å¼**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç’°å¢ƒä¾å­˜ã®ãƒˆãƒ©ãƒ–ãƒ«ã®8å‰²ã‚’è§£æ±º

2. **ChromaDBãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»•æ§˜ã®å®Ÿè£…**
   - ã€ŒRAGãŒä½¿ãˆãªã„ã¨ã‚¢ãƒ—ãƒªãŒå®Œå…¨ã«æ­»ã¬ã€çŠ¶æ…‹ã‚’å›é¿

3. **Tauriã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã®Next.jsåˆ¶ç´„ã®å¯¾å¿œ**
   - ã€Œæœ¬ç•ªã ã‘ç”»åƒãƒ»CSSãŒæ­»ã¬ã€äº‹æ•…ã‚’é˜²æ­¢

### âš¡ é«˜å„ªå…ˆåº¦ï¼ˆæ¬¡å›ãƒªãƒªãƒ¼ã‚¹ã¾ã§ã«å®Ÿè£…ï¼‰

4. **èµ·å‹•é †åºä¿è¨¼ã®å®Ÿè£…**
   - ChromaDBèµ·å‹•æˆåŠŸå¾Œã«APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç™»éŒ²

5. **æ§‹é€ åŒ–ãƒ­ã‚°ã®æ¡ç”¨**
   - ã‚µãƒãƒ¼ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ã‚³ã‚¹ãƒˆã®å‰Šæ¸›

6. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¨©é™ãƒ¢ãƒ‡ãƒ«ã®æ–‡æ›¸åŒ–**
   - ä¼æ¥­ç’°å¢ƒã§ã®å¯©æŸ»å¯¾å¿œ
